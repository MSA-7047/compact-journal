{% extends 'base_content.html' %}
{% block content %}
{% load static %}

<section class="container">
    <div class="row pb-4 px-4 justify-content-between ">
  
      <div class="col-xxl-8 border bg-light rounded justify-content-center align-items-center position-relative pt-2 pb-3 mx-auto my-2"> <!-- Added mx-auto and my-2 here -->
        <div class="row"> <!-- Added mx-2 here for gap between boxes -->

          <div class="col-12">
            <div class="small-buttons position-relative">
              <a class="btn btn-left" href="{% url 'dashboard' %}">
                <i class="bi bi-arrow-left me-2"></i>
                <span>Back</span>
              </a>
            
              <div class="right-buttons">
                <a class="btn btn-success" role="button" href="{% url 'create_group' %}">Create Group +</a>
              </div>
            </div>
          </div>
          
          <div class="col-12">
            <div class="d-flex justify-content-center text-center">
              <h1>My Groups:</h1>
            </div>
                
            {% if groups %}
              <ul class="list-group px-1" style="height:350px; overflow-y: auto;">
                  {% for group in groups.all %}
                      <li class="list-group-item mb-2 border">
                          <div class="d-flex flex-column justify-content-center">
          
                            <div class="small-buttons position-relative">
                              <div class="right-buttons ms-auto">
                                    <a class="btn" href="{% url 'group_dashboard' group_id=group.group_id %}">View Group Dashboard</a>
                              </div>
                            </div>
                            
                            <h2>{{ group.name }}</h2>
                            <hr>
                            <p>Group Bio: ...</p>
                            <br>
                            <p>Number of members: </p>
                            
                            
                          </div>
                      </li>
                  {% endfor %}
              {% else %}
              <li class="list-group-item mb-2 border bg-white py-5 text-center">
                You have no groups at the moment.
              </li>  
              {% endif %}
              </ul>
          
          </div>
        </div>
      </div>  

      <div class="col-xxl-3 border bg-light rounded position-relative py-2 px-2 mx-auto my-2"> <!-- Added mx-auto and my-2 here -->

        <div class="d-flex justify-content-center text-center">
            <h1>Group Invitations</h1>
        </div>
        
        {% if group_requests %}
            <ul class="list-group px-2">
                {% for group_request in group_requests %}
                    <li class="list-group-item border bg-white">
                        <div class="small-buttons position-relative">
                            <h5>{{ group_request.sender.username }} invited you to join {{ group_request.group.name }}</h5>
                            <div class="right-buttons ms-auto">
                                <form action="{% url 'accept_group_request' group_id=group_request.group.group_id %}" method="post">
                                    {% csrf_token %}
                                    <a type="submit" class="btn">Accept</a>
                                </form>
                                <form action="{% url 'reject_group_request' group_id=group_request.group.group_id %}" method="post">
                                    {% csrf_token %}
                                    <a type="submit" class="btn btn-delete">Reject</a>
                                </form>
                            </div>
                          </div>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
                    <li class="list-group-item mb-2 border bg-white py-5 text-center">
                        <p>No pending group requests.</p>
                    </li>
            </ul>
        {% endif %}
    </div>
  
    </div>
</section>
{% endblock %}


